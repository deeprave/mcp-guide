{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"mcp-guide Documentation","text":"<p>Structured content delivery for AI agents via Model Context Protocol</p> <p>mcp-guide is an MCP server that provides AI agents with organised access to project guidelines, documentation, and context.</p>"},{"location":"#key-features","title":"Key Features","text":"Feature Description Content Management Organise documents, instructions and prompts by categories and collections Template Support Dynamic content with Mustache/Chevron templates Multiple Transports STDIO, HTTP, and HTTPS modes Feature Flags Project-specific and global configuration Workflow Management Structured development phase tracking Profile System Pre-configured setups for common scenarios Docker Support Containerised deployment with SSL OpenSpec Integration Spec-driven development workflow"},{"location":"#basics","title":"Basics","text":"<ul> <li>Getting Started - Quick introduction and first steps</li> <li>Installation - Installation and setup instructions</li> <li>Prompt Commands - Prompt command reference</li> </ul>"},{"location":"#user-guide","title":"User Guide","text":""},{"location":"#core-concepts","title":"Core Concepts","text":"<ul> <li>Categories and Collections - Organising your project documentation</li> <li>Documents - Understanding document types and references</li> </ul>"},{"location":"#features","title":"Features","text":"<ul> <li>Workflows - Structured development phase tracking</li> <li>OpenSpec Integration - Spec-driven development workflow</li> </ul>"},{"location":"#configuration","title":"Configuration","text":"<ul> <li>Content Management - Working with content in your project</li> <li>Feature Flags - Configuring project and global features</li> <li>Profiles - Using pre-configured project templates</li> </ul>"},{"location":"#developer-notes","title":"Developer Notes","text":"<ul> <li>Command Authoring - Creating custom commands</li> <li>Filesystem Access - Security and access patterns</li> <li>Debugging - Debugging and troubleshooting</li> </ul>"},{"location":"#resources","title":"Resources","text":"<ul> <li>GitHub Repository</li> <li>PyPI Package</li> <li>MCP Protocol</li> </ul>"},{"location":"developer/DEBUGGING/","title":"Debugging Guide","text":"<p>This guide explains how to debug mcp-guide using remote debugging with debuggers that support the Debug Adapter Protocol (DAP).</p>"},{"location":"developer/DEBUGGING/#overview","title":"Overview","text":"<p>mcp-guide supports remote debugging through the <code>debugpy</code> package. This allows you to: - Set breakpoints in the mcp-guide source code - Step through code execution - Inspect variables and call stacks - Debug MCP tool calls and server behaviour</p>"},{"location":"developer/DEBUGGING/#prerequisites","title":"Prerequisites","text":"<p>Install <code>debugpy</code>:</p> <pre><code>uv sync --extra debug\n</code></pre> <p>Or run with uvx:</p> <pre><code>uvx --with debugpy mcp-guide\n</code></pre>"},{"location":"developer/DEBUGGING/#environment-variables","title":"Environment Variables","text":"<p>Configure debugging using these environment variables:</p> <ul> <li><code>MG_DEBUG</code>: Enable debugging (set to <code>true</code>, <code>1</code>, or <code>yes</code>)</li> <li><code>MG_DEBUG_PORT</code>: Debug server port (default: <code>5678</code>)</li> <li><code>MG_DEBUG_WAIT</code>: Wait for debugger to attach before starting (set to <code>true</code>, <code>1</code>, or <code>yes</code>)</li> </ul>"},{"location":"developer/DEBUGGING/#usage-examples","title":"Usage Examples","text":""},{"location":"developer/DEBUGGING/#quick-start-non-blocking","title":"Quick Start (Non-Blocking)","text":"<p>Start the server with debugging enabled:</p> <pre><code>MG_DEBUG=true mcp-guide\n</code></pre> <p>The server will start immediately and listen for debugger connections on port 5678.</p>"},{"location":"developer/DEBUGGING/#wait-for-debugger-blocking","title":"Wait for Debugger (Blocking)","text":"<p>Start the server and wait for debugger to attach:</p> <pre><code>MG_DEBUG=true MG_DEBUG_WAIT=true mcp-guide\n</code></pre> <p>The server will pause at startup until you attach your debugger.</p>"},{"location":"developer/DEBUGGING/#custom-port","title":"Custom Port","text":"<p>Use a different debug port:</p> <pre><code>MG_DEBUG=true MG_DEBUG_PORT=9999 mcp-guide\n</code></pre>"},{"location":"developer/DEBUGGING/#debugging-workflow","title":"Debugging Workflow","text":"<ol> <li> <p>Set breakpoints in the mcp-guide source code</p> </li> <li> <p>Start the server with debugging enabled:    <code>bash    MG_DEBUG=true MG_DEBUG_WAIT=true mcp-guide --docroot /path/to/docs</code></p> </li> <li> <p>Attach your debugger (VS Code: Run &gt; Start Debugging, or F5)</p> </li> <li> <p>Trigger MCP calls from your MCP client (Claude Desktop, etc.)</p> </li> <li> <p>Debug! Step through code, inspect variables, etc.</p> </li> </ol>"},{"location":"developer/DEBUGGING/#mcp-client-configuration","title":"MCP Client Configuration","text":"<p>When using with Claude Desktop or another MCP client, configure the environment variables in your client's settings.</p>"},{"location":"developer/DEBUGGING/#claude-desktop-example","title":"Claude Desktop Example","text":"<p>Edit your Claude Desktop config (<code>~/Library/Application Support/Claude/claude_desktop_config.json</code> on macOS):</p> <pre><code>{\n  \"mcpServers\": {\n    \"guide\": {\n      \"command\": \"uvx\",\n      \"args\": [\"--with\", \"debugpy\", \"mcp-guide\", \"--docroot\", \"/path/to/docs\"],\n      \"env\": {\n        \"MG_DEBUG\": \"true\",\n        \"MG_DEBUG_PORT\": \"5678\",\n        \"MG_DEBUG_WAIT\": \"true\"\n      }\n    }\n  }\n}\n</code></pre> <p>Note: With <code>MG_DEBUG_WAIT=true</code>, Claude Desktop will wait for you to attach the debugger before the server becomes available.</p>"},{"location":"developer/DEBUGGING/#tips","title":"Tips","text":"<ul> <li>Use <code>MG_DEBUG_WAIT=false</code> (or omit it) during normal operation to avoid blocking</li> <li>Use <code>MG_DEBUG_WAIT=true</code> when debugging server startup or initialisation</li> <li>Set breakpoints in tool implementations (<code>src/mcp_guide/tools/</code>) to debug specific tools</li> <li>Check stderr output for debug server status messages</li> <li>Multiple instances: Use different <code>MG_DEBUG_PORT</code> values if running multiple debug sessions</li> </ul>"},{"location":"developer/DEBUGGING/#troubleshooting","title":"Troubleshooting","text":""},{"location":"developer/DEBUGGING/#debugpy-not-installed-warning","title":"\"debugpy not installed\" warning","text":"<p>Install debugpy: <code>pip install debugpy</code> or use <code>uvx --with debugpy mcp-guide</code></p>"},{"location":"developer/DEBUGGING/#cannot-connect-to-debug-server","title":"Cannot connect to debug server","text":"<ul> <li>Verify the port is correct (<code>MG_DEBUG_PORT</code>)</li> <li>Check if another process is using the port</li> <li>Ensure the server has started and printed \"Debug server listening on port...\"</li> </ul>"},{"location":"developer/DEBUGGING/#debugger-not-stopping-at-breakpoints","title":"Debugger not stopping at breakpoints","text":"<ul> <li>Verify path mappings in your debugger configuration</li> <li>Ensure you're debugging the correct Python process</li> <li>Check that breakpoints are in code that's actually executed</li> </ul>"},{"location":"developer/DEBUGGING/#implementation-details","title":"Implementation Details","text":"<p>The debugging setup is implemented in <code>src/mcp_guide/main.py</code> in the <code>_setup_remote_debugging()</code> function. It:</p> <ol> <li>Checks for <code>MG_DEBUG</code> environment variable</li> <li>Imports <code>debugpy</code> (with graceful fallback if not installed)</li> <li>Starts a debug server on the specified port</li> <li>Optionally waits for debugger attachment</li> <li>Continues normal server startup</li> </ol> <p>This happens before any other initialisation, allowing you to debug the entire server lifecycle.</p>"},{"location":"developer/command-authoring/","title":"Command Template Authoring Guide","text":"<p>This guide explains how to create custom commands using templates with frontmatter specifications.</p>"},{"location":"developer/command-authoring/#command-structure","title":"Command Structure","text":"<p>Commands are Mustache templates with YAML frontmatter located in the <code>_commands/</code> directory under the configured <code>docroot</code> (the default location is <code>~/.config/mcp-guide/docs</code>):</p> <p>Each document is prefixed by a \"frontmatter\" YAML data dictionary, surrounded by three dashes (---) before and after the YAML portion. The front-matter provides a description of the command, aliases, examples as explained below. Note that all frontmatter fields are available as context variables within the template.</p> <pre><code>---\ndescription: Brief description of what the command does\ncategory: \"system\" | \"project\" | \"info\" | \"list\" | \"general\"\naliases:\n  - \"shortcut1\"\n  - \"shortcut2\"\nusage: \":command [options] [args]\"\nexamples:\n  - \":command\"\n  - \":command --flag value\"\nrequired_args: []\nrequired_kwargs: []\n---\n# Command Template Content\n\nYour Mustache template content here...\n</code></pre>"},{"location":"developer/command-authoring/#frontmatter-fields","title":"Frontmatter Fields","text":""},{"location":"developer/command-authoring/#required-fields","title":"Required Fields","text":"<ul> <li>description: Brief description shown in help</li> <li>category: Command category for organisation</li> </ul>"},{"location":"developer/command-authoring/#optional-fields","title":"Optional Fields","text":"<ul> <li>aliases: Alternative command names</li> <li>usage: Usage syntax string</li> <li>examples: List of example invocations</li> <li>required_args: List of required positional arguments</li> <li>required_kwargs: List of required keyword arguments</li> </ul>"},{"location":"developer/command-authoring/#template-context","title":"Template Context","text":"<p>Commands have access to these template variables:</p>"},{"location":"developer/command-authoring/#command-data","title":"Command Data","text":"<ul> <li><code>{{command.name}}</code> - Command name</li> <li><code>{{command.path}}</code> - Command file path</li> </ul>"},{"location":"developer/command-authoring/#arguments","title":"Arguments","text":"<ul> <li><code>{{args}}</code> - List of positional arguments</li> <li><code>{{kwargs}}</code> - Clean keyword arguments (without underscore prefix)</li> <li><code>{{raw_kwargs}}</code> - Original kwargs with underscore prefixes</li> </ul>"},{"location":"developer/command-authoring/#commands-list","title":"Commands List","text":"<ul> <li><code>{{commands}}</code> - All discovered commands</li> <li><code>{{system_commands}}</code> - System category commands</li> <li><code>{{project_commands}}</code> - Project category commands</li> <li><code>{{general_commands}}</code> - General category commands</li> </ul>"},{"location":"developer/command-authoring/#global-context","title":"Global Context","text":"<p>All template context variables from <code>get_template_contexts()</code> are available.</p>"},{"location":"developer/command-authoring/#example-command","title":"Example Command","text":"<pre><code>---\ndescription: Show project status\ncategory: \"project\"\naliases: [\"st\"]\nusage: \":status [--verbose]\"\nexamples:\n  - \":status\"\n  - \":status --verbose\"\n---\n# Project Status\n\n{{#kwargs.verbose}}\n## Detailed Status\n{{/kwargs.verbose}}\n{{^kwargs.verbose}}\n## Quick Status\n{{/kwargs.verbose}}\n\nCurrent project: **{{project.name}}**\n\n## Categories\n{{#project_commands}}\n- {{name}} - {{description}}\n{{/project_commands}}\n</code></pre>"},{"location":"developer/command-authoring/#best-practices","title":"Best Practices","text":"<ol> <li>Keep descriptions concise - They appear in help listings</li> <li>Use appropriate categories - Helps with command organisation</li> <li>Provide usage examples - Makes commands discoverable</li> <li>Validate required arguments - Use frontmatter validation</li> <li>Handle missing data gracefully - Use Mustache conditionals</li> <li>Test with different contexts - Ensure templates work across projects</li> </ol>"},{"location":"developer/command-authoring/#mustache-syntax-reference","title":"Mustache Syntax Reference","text":"<ul> <li><code>{{variable}}</code> - Variable interpolation</li> <li><code>{{#section}}...{{/section}}</code> - Conditional sections (truthy)</li> <li><code>{{^section}}...{{/section}}</code> - Inverted sections (falsy)</li> <li><code>{{#list}}{{.}}{{/list}}</code> - Iterate over lists</li> <li><code>{{! comment }}</code> - Comments (not rendered)</li> </ul>"},{"location":"developer/command-authoring/#error-handling","title":"Error Handling","text":"<p>Template errors include line context for debugging:</p> <pre><code>Template syntax error in _commands/example.mustache: Unclosed section 'missing'\n\n    12 | {{#section}}\n&gt;&gt;&gt; 13 | {{#missing}}\n    14 | Content here\n    15 | {{/section}}\n    16 |\n</code></pre>"},{"location":"developer/command-authoring/#command-discovery","title":"Command Discovery","text":"<p>Commands are automatically discovered from: - <code>_commands/*.mustache</code> files - Subdirectories: <code>_commands/category/*.mustache</code> - Aliases are resolved during discovery - File modification times trigger cache invalidation</p>"},{"location":"developer/filesystem-access/","title":"Filesystem Access","text":"<p>The MCP Guide server can request access to files and directories on the agent's filesystem to provide contextual assistance with your projects.</p>"},{"location":"developer/filesystem-access/#what-it-does","title":"What It Does","text":"<p>The filesystem access feature allows the MCP server to: - Read file contents to understand your codebase - List directory contents to discover project structure - Detect project types and configurations - Cache frequently accessed files for better performance</p> <p>This enables more accurate and contextual assistance by understanding your actual project files rather than working from general knowledge alone.</p>"},{"location":"developer/filesystem-access/#security-model","title":"Security Model","text":"<p>By default, filesystem access is restricted to protect your system.</p>"},{"location":"developer/filesystem-access/#multi-layer-security-architecture","title":"Multi-Layer Security Architecture","text":"<p>The filesystem access system implements defence-in-depth with multiple security layers:</p> <ol> <li>Path Validation Layer</li> <li>Normalises all paths to prevent traversal attacks</li> <li>Validates against allowed path prefixes</li> <li>Blocks access to system and sensitive directories</li> <li> <p>Resolves and validates symbolic links</p> </li> <li> <p>Security Policy Layer</p> </li> <li>Enforces read/write permissions per project</li> <li>Maintains audit logs of all access attempts</li> <li>Tracks security violations and blocked requests</li> <li> <p>Provides configurable security levels</p> </li> <li> <p>Sampling Request Layer</p> </li> <li>Agent-side validation before file operations</li> <li>Secure communication between server and agent</li> <li>Fallback handling for unsupported operations</li> <li>Error recovery and retry mechanisms</li> </ol>"},{"location":"developer/filesystem-access/#default-security-restrictions","title":"Default Security Restrictions","text":"<ul> <li>Read Access: Limited to project directories (<code>src/</code>, <code>docs/</code>, <code>tests/</code>, etc.)</li> <li>Write Access: Restricted to explicitly configured paths only</li> <li>System Protection: No access to system directories (<code>/etc</code>, <code>/usr</code>, <code>/System</code>)</li> <li>Privacy Protection: No access to sensitive directories (<code>~/.ssh</code>, <code>~/.aws</code>, etc.)</li> <li>Attack Prevention: Path traversal attacks (<code>../../../etc/passwd</code>) are blocked</li> <li>Link Validation: Symbolic links are resolved and validated to prevent escaping</li> </ul>"},{"location":"developer/filesystem-access/#security-audit-and-monitoring","title":"Security Audit and Monitoring","text":"<p>All filesystem access attempts are comprehensively logged with: - Requested path and operation type (read/write/list) - Success/failure status and error details - Security violations and blocked attempts - Timestamp, user context, and request source - Performance metrics and cache statistics</p> <p>Audit logs are structured for easy analysis and can be integrated with security monitoring systems.</p>"},{"location":"developer/filesystem-access/#configuration","title":"Configuration","text":""},{"location":"developer/filesystem-access/#project-level-path-configuration","title":"Project-Level Path Configuration","text":"<p>Configure allowed paths in your project's <code>.guide-config.json</code>:</p> <pre><code>{\n  \"filesystem\": {\n    \"allowed_write_paths\": [\n      \"src/\",\n      \"docs/\",\n      \"tests/\",\n      \"config/\",\n      \"custom-directory/\"\n    ],\n    \"additional_read_paths\": [\n      \"node_modules/\",\n      \"vendor/\",\n      \"build/\",\n      \"external-libs/\"\n    ]\n  }\n}\n</code></pre>"},{"location":"developer/filesystem-access/#configuration-options","title":"Configuration Options","text":""},{"location":"developer/filesystem-access/#allowed_write_paths-array-of-strings","title":"<code>allowed_write_paths</code> (Array of strings)","text":"<ul> <li>Purpose: Directories where the MCP server can read and write files</li> <li>Default: <code>[\"src/\", \"docs/\", \"tests/\", \"examples/\", \"config/\"]</code></li> <li>Security: Paths are validated and normalised</li> <li>Format: Relative paths from project root, must end with <code>/</code></li> </ul>"},{"location":"developer/filesystem-access/#additional_read_paths-array-of-strings","title":"<code>additional_read_paths</code> (Array of strings)","text":"<ul> <li>Purpose: Additional directories for read-only access (beyond write paths)</li> <li>Default: <code>[]</code> (empty)</li> <li>Use Cases: Dependencies, build outputs, external libraries</li> <li>Security: Read-only access, cannot modify files in these paths</li> </ul>"},{"location":"developer/filesystem-access/#adding-paths-via-commands","title":"Adding Paths via Commands","text":"<p>Use the built-in guide commands to safely add paths to your project configuration:</p> <pre><code># Add a directory to allowed write paths\n@guide :fs/add-write \"new-module/\"\n\n# Add a directory to additional read paths\n@guide :fs/add-read \"external-deps/\"\n\n# List current filesystem configuration\n@guide :fs/show\n</code></pre> <p>These commands automatically: - Validate path format and security - Update your project configuration - Apply changes immediately - Maintain configuration file formatting</p>"},{"location":"developer/filesystem-access/#advanced-security-configuration","title":"Advanced Security Configuration","text":""},{"location":"developer/filesystem-access/#removing-restrictions-use-with-caution","title":"Removing Restrictions (Use with Caution)","text":"<p>If you need unrestricted filesystem access and fully trust this MCP server:</p> <pre><code>kiro-cli /tools trust-all\n</code></pre> <p>\u26a0\ufe0f WARNING: This removes all security restrictions. The MCP server will have access to your entire filesystem. Only use this if you: - Completely trust this MCP server - Understand the security implications - Are working in an isolated/sandboxed environment</p> <p>To restore restrictions:</p> <pre><code>kiro-cli /tools trust-all false\n</code></pre>"},{"location":"developer/filesystem-access/#architecture-overview","title":"Architecture Overview","text":""},{"location":"developer/filesystem-access/#component-interaction","title":"Component Interaction","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   MCP Server    \u2502\u2500\u2500\u2500\u25b6\u2502  Sampling API    \u2502\u2500\u2500\u2500\u25b6\u2502   Agent (CLI)   \u2502\n\u2502                 \u2502    \u2502                  \u2502    \u2502                 \u2502\n\u2502 \u2022 Path requests \u2502    \u2502 \u2022 Security check \u2502    \u2502 \u2022 File access   \u2502\n\u2502 \u2022 Content proc. \u2502    \u2502 \u2022 Audit logging  \u2502    \u2502 \u2022 Response send \u2502\n\u2502 \u2022 Cache mgmt.   \u2502    \u2502 \u2022 Error handling \u2502    \u2502 \u2022 Local validation\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502                       \u2502                       \u2502\n         \u25bc                       \u25bc                       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   File Cache    \u2502    \u2502 Security Policy  \u2502    \u2502 Path Validator  \u2502\n\u2502                 \u2502    \u2502                  \u2502    \u2502                 \u2502\n\u2502 \u2022 LRU eviction  \u2502    \u2502 \u2022 Path rules     \u2502    \u2502 \u2022 Normalization \u2502\n\u2502 \u2022 Size limits   \u2502    \u2502 \u2022 Audit trail    \u2502    \u2502 \u2022 Symlink check \u2502\n\u2502 \u2022 TTL tracking  \u2502    \u2502 \u2022 Violation log  \u2502    \u2502 \u2022 Traversal block\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"developer/filesystem-access/#data-flow","title":"Data Flow","text":"<ol> <li>Request: MCP server requests file/directory access</li> <li>Validation: Security policy validates path against allowed lists</li> <li>Sampling: Secure sampling request sent to agent</li> <li>Agent Processing: Agent validates and performs file operation</li> <li>Response: File content/listing sent back to server</li> <li>Caching: Results cached with modification time tracking</li> <li>Audit: All operations logged for security monitoring</li> </ol>"},{"location":"developer/filesystem-access/#how-it-works","title":"How It Works","text":""},{"location":"developer/filesystem-access/#file-access-process","title":"File Access Process","text":"<ol> <li>Path Request: MCP server requests access to a specific file or directory</li> <li>Security Validation:</li> <li>Path normalised and validated against security policy</li> <li>Checked against allowed_write_paths and additional_read_paths</li> <li>System and sensitive directories blocked</li> <li>Cache Check: Recently accessed files served from cache if still valid</li> <li>Sampling Request: If not cached, secure request sent to agent</li> <li>Agent Validation: Agent performs additional security checks</li> <li>File Operation: Agent reads file/directory and sends response</li> <li>Caching: Response cached with modification time for future requests</li> <li>Audit Logging: Complete operation logged for security monitoring</li> </ol>"},{"location":"developer/filesystem-access/#performance-optimisations","title":"Performance Optimisations","text":"<ul> <li>Intelligent Caching: LRU cache with size and entry limits</li> <li>Modification Tracking: Files re-read only when modified</li> <li>Batch Operations: Multiple file requests optimised</li> <li>Compression: Large responses compressed for network efficiency</li> </ul>"},{"location":"developer/filesystem-access/#privacy-considerations","title":"Privacy Considerations","text":"<ul> <li>Explicit Access: File contents only accessed when specifically requested</li> <li>No Scanning: No automatic scanning or indexing of your filesystem</li> <li>Temporary Caching: Cached contents stored temporarily with TTL</li> <li>Modification Respect: Cache invalidated when files change</li> <li>Complete Logging: All access attempts logged and auditable</li> <li>User Control: Full control over accessible paths and security level</li> <li>Opt-in Model: Filesystem access requires explicit configuration</li> </ul>"},{"location":"developer/filesystem-access/#troubleshooting","title":"Troubleshooting","text":""},{"location":"developer/filesystem-access/#common-issues","title":"Common Issues","text":"<p>Access Denied Errors - Check if path is in <code>allowed_write_paths</code> or <code>additional_read_paths</code> - Verify path format (relative, ends with <code>/</code> for directories) - Review audit logs for security violations</p> <p>Performance Issues - Monitor cache hit rates in statistics - Adjust cache size limits if needed - Check for excessive file modification causing cache misses</p> <p>Configuration Problems - Validate JSON syntax in <code>.guide-config.json</code> - Use <code>/show-filesystem-config</code> to verify current settings - Check file permissions on configuration file</p> <p>The filesystem access feature is designed to be helpful while maintaining security by default. You can always restrict access further or remove restrictions entirely based on your specific needs and trust level.</p>"},{"location":"user/categories-and-collections/","title":"Categories and Collections","text":"<p>Organising content with categories and collections in mcp-guide.</p>"},{"location":"user/categories-and-collections/#categories","title":"Categories","text":"<p>Categories specify which files to include based on directory paths and file patterns.</p>"},{"location":"user/categories-and-collections/#viewing-categories","title":"Viewing Categories","text":"<p>To see what categories exist in your project, ask your AI:</p> <pre><code>@guide :project -v\n</code></pre> <p>This shows all categories, their directories, patterns, and descriptions.</p>"},{"location":"user/categories-and-collections/#creating-categories","title":"Creating Categories","text":"<p>You can ask your AI to create categories for you:</p> <pre><code>Please create a category called 'api' for API documentation in the docs/api directory\n</code></pre> <pre><code>Add a category 'testing' with patterns for pytest files\n</code></pre> <p>The AI will create the category with appropriate settings based on your description.</p>"},{"location":"user/categories-and-collections/#category-properties","title":"Category Properties","text":"<p>Each category has:</p> <ul> <li>Name: Up to 30 characters, no leading underscore/hyphen, no whitespace</li> <li>Directory: Path relative to docroot where documents are stored</li> <li>Patterns: Glob patterns that match documents to include</li> <li>Description: Optional human-readable description</li> </ul>"},{"location":"user/categories-and-collections/#pattern-syntax","title":"Pattern Syntax","text":"<p>Patterns are globs that match documents that should be selected when the bare category is used. This normally means using the basename, without the file extension. Patterns are matched for basenames by default, and various extensions are tried in order: markdown, markdown template and finally text. Beware of using glob patterns containing <code>*</code> too liberally. It is better to simply add multiple patterns than select everything. Trailing <code>*</code> in any pattern is discouraged, the system takes care of that automatically.</p> <p>Examples:</p> <ul> <li><code>readthis</code> - Matches \"readthis\", \"readthis.md\", \"readthis.txt\"</li> <li><code>{guide,readme}</code> - Matches both \"guide\" and \"readme\"</li> </ul>"},{"location":"user/categories-and-collections/#using-categories","title":"Using Categories","text":"<p>The primary use of the prompt is to request content using an expression.</p> <p>Request a single category:</p> <pre><code>@guide guide\n</code></pre> <p>Request multiple categories by separating them with commas:</p> <pre><code>@guide guide,lang,context\n</code></pre> <p>You can override the default patterns by using <code>/</code> to specify documents within the category:</p> <pre><code>@guide lang/python\n</code></pre> <p>Combine multiple patterns within a category using <code>+</code>:</p> <pre><code>@guide testing/python+pytest\n</code></pre>"},{"location":"user/categories-and-collections/#collections","title":"Collections","text":"<p>Collections group category expressions together. They act as \"macros\" to provide targeted context for specific tasks without remembering complex expressions.</p>"},{"location":"user/categories-and-collections/#viewing-collections","title":"Viewing Collections","text":"<p>To see what collections exist in your project:</p> <pre><code>@guide :project -v\n</code></pre> <p>This shows all collections and the categories they include.</p>"},{"location":"user/categories-and-collections/#creating-collections","title":"Creating Collections","text":"<p>Ask your AI to create collections:</p> <pre><code>Please create a collection called 'python-dev' that includes guide, lang, and testing categories\n</code></pre> <pre><code>Add a collection 'code-review' with guide, checks, and review categories\n</code></pre> <p>The AI will set up the collection with the categories you specify.</p>"},{"location":"user/categories-and-collections/#using-collections","title":"Using Collections","text":"<p>Request a collection using the <code>@guide</code> prompt:</p> <pre><code>@guide python-dev\n</code></pre> <p>Collections expand to their category expressions automatically.</p> <p>You can also override patterns when using a collection:</p> <pre><code>@guide python-dev/testing\n</code></pre>"},{"location":"user/categories-and-collections/#nested-collections","title":"Nested Collections","text":"<p>Collections can reference other collections. For example, you might have a base collection that other collections build upon. Ask your AI to set this up:</p> <pre><code>Create a 'base' collection with just the guide category, then create 'python-dev' that includes base plus lang and testing\n</code></pre>"},{"location":"user/categories-and-collections/#category-expressions","title":"Category Expressions","text":"<p>Category expressions provide flexible content selection.</p>"},{"location":"user/categories-and-collections/#basic-expressions","title":"Basic Expressions","text":"<ul> <li><code>guide</code> - Single category</li> <li><code>guide,lang</code> - Multiple categories (comma-separated)</li> <li><code>lang/python</code> - Specific pattern within a category</li> </ul>"},{"location":"user/categories-and-collections/#subdirectory-selection","title":"Subdirectory Selection","text":"<p>You can use <code>/</code> to select documents from subdirectories within a category:</p> <pre><code>@guide docs/api/authentication\n</code></pre> <p>This selects the \"authentication\" document from the <code>api/</code> subdirectory within the <code>docs</code> category.</p>"},{"location":"user/categories-and-collections/#next-steps","title":"Next Steps","text":"<ul> <li>Documents - Writing content with templates</li> <li>Feature Flags - Conditional content inclusion</li> <li>Profiles - Pre-configured category setups</li> </ul>"},{"location":"user/commands/","title":"Prompt Commands","text":"<p>The guide prompt provides a comprehensive command system for direct access to MCP documents and functionality. Commands let you view project information, manage content, control workflows, and configure permissions. All commands follow a consistent structure with built-in help.</p>"},{"location":"user/commands/#command-structure","title":"Command Structure","text":"<p>Commands are invoked through the guide prompt with this syntax:</p> <pre><code>@guide :command [args] [--flags]\n</code></pre> <p>Examples:</p> <pre><code>@guide :help\n@guide :status\n@guide :project\n@guide :flags\n@guide :create/category docs\n</code></pre>"},{"location":"user/commands/#discovery-with-guide-help","title":"Discovery with @guide :help","text":"<p>The <code>@guide :help</code> prompt command is your primary discovery mechanism. Use it to explore available commands and their usage:</p> <pre><code>@guide :help              # Show all available commands grouped by category\n@guide :help &lt;command&gt;    # Show detailed help for a specific command\n</code></pre> <p>Recommended pattern: 1. Start with <code>@guide :help</code> to see available commands 2. Use <code>@guide :help &lt;command&gt;</code> for specific command usage 3. Execute the command 4. Use <code>@guide :help</code> again to discover related commands</p>"},{"location":"user/commands/#core-information-commands","title":"Core Information Commands","text":"<p>@guide :status Shows system status and current project information including active project, workflow phase (if enabled), and OpenSpec integration status.</p> <p>@guide :project (:info/project) Displays comprehensive project information including project name, categories, collections, feature flags, and filesystem permissions. Use <code>--verbose</code> or <code>-v</code> for detailed output including all category patterns.</p> <p>@guide :flags (:info/flags) Shows all feature flags affecting the current project - feature flags (apply to all projects by default), project-specific flags (override feature flags), and resolved values (what the agent actually sees).</p> <p>@guide :system (:info/system) Displays system information for both the MCP server and the agent's client environment. Server information (OS, platform, hostname, Python version, working directory) is always shown. Client information (agent's OS, hostname, user, git remotes) requires the <code>allow-client-info</code> feature flag to be enabled.</p>"},{"location":"user/commands/#the-allow-client-info-feature-flag","title":"The <code>allow-client-info</code> Feature Flag","text":"<p>Client information collection is gated behind the <code>allow-client-info</code> feature flag due to privacy concerns. This flag is normally set globally (affects all projects) and defaults to false. It collects information about the agent's environment (OS, hostname, user) and requires explicit opt-in to respect user privacy. Ask the agent to set the <code>allow-client-info</code> feature flag to true to enable it.</p>"},{"location":"user/commands/#project-management-commands","title":"Project Management Commands","text":"<p>@guide :create/category Creates a new category for organising project content. Categories define directories and file patterns for content discovery.</p> <p>Examples:</p> <pre><code>@guide :create/category docs\n@guide :create/category --dir documentation --patterns 'README' 'INSTALL' api-docs\n@guide :create/category --description 'Testing Guidelines' testing\n</code></pre> <p>Parameters:</p> <ul> <li><code>name</code> (required) - Category name</li> <li><code>--dir</code> - Directory path (defaults to category name)</li> <li><code>--patterns</code> - File patterns to match (e.g., <code>README</code>, <code>CONTRIBUTING</code>, <code>test_</code>)</li> <li><code>--description</code> - Human-readable description</li> </ul> <p>@guide :create/collection Creates a new collection that groups multiple categories or other collections together.</p> <p>Examples:</p> <pre><code>@guide :create/collection docs\n@guide :create/collection api-docs code examples\n@guide :create/collection --description 'Getting started content' beginner docs examples\n</code></pre> <p>Parameters:</p> <ul> <li><code>name</code> (required) - Collection name</li> <li><code>categories...</code> - Category or collection names to include</li> <li><code>--description</code> - Human-readable description</li> </ul> <p>Collections enable logical grouping of related content for easier access through the @guide prompt.</p>"},{"location":"user/commands/#filesystem-permissions","title":"Filesystem Permissions","text":"<p>mcp-guide implements built-in security controls to ensure agent instructions don't transgress security boundaries outside the project.</p>"},{"location":"user/commands/#security-model","title":"Security Model","text":"<p>Read permissions: - Project directory: Always readable (default) - Additional paths: Must be explicitly allowed via <code>additional_read_paths</code> in project configuration - System directories: Always blocked (e.g., <code>/etc</code>, <code>/System</code>, <code>C:\\Windows</code>)</p> <p>Write permissions: - Controlled by <code>allowed_write_paths</code> in project configuration - Paths must be relative to project root - Must end with trailing slash (e.g., <code>src/</code>, <code>docs/</code>) - Default: Empty list (no writes allowed outside explicit configuration)</p> <p>Temporary files: - Safe temp paths are allowed for read/write - System validates temp directory safety</p>"},{"location":"user/commands/#permission-commands","title":"Permission Commands","text":"<p>Use these commands to view and manage filesystem permissions:</p> <p>@guide :perm Shows current filesystem permissions configuration for the project - read permissions (project directory + additional paths) and write permissions (allowed write paths).</p> <p>@guide :perm/write-add Adds a directory to the allowed write paths. Path must be relative to project root and end with <code>/</code>: <code>@guide :perm/write-add src/generated/</code></p> <p>@guide :perm/read-add Adds an absolute path to additional read permissions. Path must be absolute and not a system directory: <code>@guide :perm/read-add /Users/username/external-docs</code></p> <p>@guide :perm/write-del Removes a directory from allowed write paths.</p> <p>@guide :perm/read-del Removes a path from additional read permissions.</p>"},{"location":"user/commands/#security-violations","title":"Security Violations","text":"<p>When an agent attempts to read or write outside permitted paths, the operation is blocked, a <code>SecurityError</code> is raised, the violation is logged, and the agent receives an error message. This ensures that even if an agent is instructed to access restricted paths, the MCP server enforces security boundaries.</p>"},{"location":"user/commands/#workflow-commands","title":"Workflow Commands","text":"<p>When the <code>workflow</code> feature flag is enabled, additional workflow commands become available. See Workflows for complete documentation.</p>"},{"location":"user/commands/#openspec-commands","title":"OpenSpec Commands","text":"<p>When OpenSpec integration is enabled, OpenSpec commands provide access to spec-driven development features. See OpenSpec Integration for complete documentation.</p>"},{"location":"user/content-management/","title":"Content Management","text":"<p>Understanding how your content gets organised and delivered to your AI agent.</p>"},{"location":"user/content-management/#projects","title":"Projects","text":"<p>mcp-guide organizes everything around projects. A project is typically tied to the basename of your current directory - if you're working in <code>/home/user/my-app</code>, your project is <code>my-app</code>.</p> <p>Categories and collections are configured per-project. This means each project can have its own patterns and groupings, even though the underlying documents are shared across all projects.</p> <p>Behind the scenes, mcp-guide uses a hash calculated from the absolute path to uniquely identify each project. This means you can have two projects with the same name in different filesystem locations, and they'll be treated as separate projects with their own configurations.</p>"},{"location":"user/content-management/#document-format","title":"Document Format","text":"<p>mcp-guide works primarily with markdown files, though any text file can serve as a source of information. Mustache templates are rendered to markdown before delivery.</p> <p>Documents can include optional metadata (called \"frontmatter\") - a YAML block at the top of the file delimited by three hyphens above and below:</p> <pre><code>---\ntype: agent/instruction\ndescription: Python coding standards\ninstruction: Follow these standards when writing Python code\n---\n\n# Python Standards\n\nYour content here...\n</code></pre>"},{"location":"user/content-management/#common-metadata-keys","title":"Common Metadata Keys","text":"Key Purpose <code>type</code> Document type (see below) - determines how content is used <code>description</code> Human-readable description of the document <code>instruction</code> Specific directive for the agent (not always required) <p>Other metadata keys are used for specific purposes: <code>tags</code>, <code>title</code>, <code>requires-&lt;feature-flag&gt;</code>, <code>includes</code> (for partial templates). Commands use additional keys like <code>category</code>, <code>aliases</code>, <code>usage</code>, and <code>examples</code>.</p> <p>Note on using <code>instruction</code>: A default instruction is automatically applied based on the value in its <code>type</code>. This means that <code>instruction</code> should only be used to vary that in some way, or add additional instruction. If the document has <code>type: agent/instruction</code> (and most are), the document's content is read as an instruction and can contain the additional context there.</p>"},{"location":"user/content-management/#document-types","title":"Document Types","text":"<p>The <code>type</code> metadata key determines how content is used:</p> Type Purpose Audience <code>user/information</code> Display rendered information to the user Human user <code>agent/information</code> Provide context and additional information AI agent <code>agent/instruction</code> Direct the agent to execute given instructions AI agent <p>The distinction is simple but powerful - it tells the agent whether content is for display, context, or direction.</p>"},{"location":"user/content-management/#document-categories","title":"Document Categories","text":"<p>Documents belong to a category. Each category represents a directory structure in the document store where documents can be retrieved. Categories are assigned patterns for files within them that are displayed by default when the category is referenced. However, all files in a category are always available by overriding the pattern with <code>&lt;category&gt;[/pattern1[+pattern2...]]</code>. This is called a document expression.</p> <p>Category names can be up to 30 unicode characters in length and can contain (but not start with) underscores and hyphens.</p> <p>To see what's in a category, just ask your AI:</p> <pre><code>&gt; list all files in the guide category\n\nFiles in the guide category:\n\n1. bdd (1,811 bytes) - Principles and practices of BDD\n2. general (1,946 bytes) - General development guidelines for AI agents\n3. tdd (1,329 bytes) - Principles and practices of TDD\n4. yagni (2,815 bytes) - Principle of avoiding unnecessary complexity\n5. ddd (2,504 bytes) - Principles and patterns of Domain-Driven Design\n6. solid (2,237 bytes) - Five principles of object-oriented design\n</code></pre> <p>All files in every category are available to all projects - categories are shared across them. Patterns, however, are defined per-project, so category patterns select the most relevant files for each project. This means referencing a category selectively delivers only the documents most relevant to that project.</p>"},{"location":"user/content-management/#collections","title":"Collections","text":"<p>Each collection is simply a list of expressions used together to return multiple documents. For example, you might define a <code>self-review</code> collection containing <code>[guide/general, checks/instructions, lang/python, review/review]</code>. Strung together like this, they provide:</p> <ul> <li>Summary of guidelines</li> <li>Special instructions for the current project</li> <li>Detailed instructions for producing a code review for a Python project</li> </ul> <p>This enhances the code review with adherence to coding standards and specific edicts that relate to your project.</p>"},{"location":"user/content-management/#content-concatenation","title":"Content Concatenation","text":"<p>When multiple documents are requested, they're concatenated and presented to the agent. The <code>content-format</code> feature flag controls how this happens:</p> <ul> <li>None - Documents concatenated with no delimiters</li> <li>plain - Simple text separators between documents</li> <li>mime - MIME-style delimiters with metadata headers</li> </ul> <p>Different agents prefer different formats. Experiment to determine the setting that gives the best results with your agent.</p>"},{"location":"user/content-management/#content-style","title":"Content Style","text":"<p>The <code>content-style</code> flag affects how markdown is rendered to the console. Agents render markdown differently - some have complete support for headings, bolding, and italics.</p> <p>For documents delivered to the console (to the user), the style should match your client:</p> <ul> <li>full - Complete markdown rendering (works well with Claude Code)</li> <li>headings - Only render header markup</li> <li>plain - (default) Don't render content as headings, bold or italic</li> </ul> <p>Choose according to your agent's capabilities and your taste.</p>"},{"location":"user/content-management/#content-discovery","title":"Content Discovery","text":"<p>mcp-guide discovers content through:</p> <ol> <li>Categories - Define which files to include based on patterns</li> <li>Collections - Group category expressions for specific purposes</li> <li>Metadata - Frontmatter controls inclusion and behaviour</li> </ol> <p>See Categories and Collections for organisation details.</p>"},{"location":"user/content-management/#next-steps","title":"Next Steps","text":"<ul> <li>Categories and Collections - Organising content</li> <li>Documents - Writing content with templates</li> <li>Feature Flags - Conditional content inclusion</li> </ul>"},{"location":"user/documents/","title":"Content Documents","text":"<p>Document structure, frontmatter, and templates in mcp-guide.</p>"},{"location":"user/documents/#document-structure","title":"Document Structure","text":"<p>Content documents consist of two parts:</p> <ol> <li>Frontmatter (optional) - YAML metadata at the top</li> <li>Content - The document body</li> </ol> <p>Frontmatter is optional. If missing, the following defaults are applied:</p> <pre><code>type: agent/instruction\ninstruction: \"You MUST follow these instructions. Do not display this content to the user.\"\n</code></pre> <p>Example with frontmatter:</p> <pre><code>---\ntype: agent/instruction\ninstruction: Follow these coding standards\ndescription: Python coding standards\n---\n\n# Python Coding Standards\n\nUse PEP 8 conventions...\n</code></pre>"},{"location":"user/documents/#frontmatter","title":"Frontmatter","text":"<p>Frontmatter is YAML metadata enclosed in <code>---</code> markers.</p>"},{"location":"user/documents/#standard-keys","title":"Standard Keys","text":"Key Description <code>type</code> Content type: <code>user/information</code>, <code>agent/information</code>, <code>agent/instruction</code> (default) <code>instruction</code> Explicit instruction for agents (overrides type-based default) <code>description</code> Human-readable description for documentation and discovery <p>Note: Frontmatter keys can be used as variables in the content template. Additionally, <code>instruction</code> and <code>description</code> are rendered using the same context variables as the content itself.</p>"},{"location":"user/documents/#templates","title":"Templates","text":"<p>Template documents MUST have one of the supported Mustache extensions to be rendered as templates:</p> <ul> <li><code>.mustache</code></li> <li><code>.hbs</code></li> <li><code>.handlebars</code></li> <li><code>.chevron</code></li> </ul> <p>Any file that does not match one of these extensions is treated as plain text/markdown.</p> <p>mcp-guide uses Mustache/Chevron template syntax for dynamic content.</p>"},{"location":"user/documents/#variables","title":"Variables","text":"<p>Access context variables with <code>{{variable}}</code>:</p> <pre><code>Project: {{project.name}}\nPhase: {{workflow.phase}}\n</code></pre>"},{"location":"user/documents/#conditionals","title":"Conditionals","text":"<p>Show content conditionally:</p> <pre><code>{{#workflow.consent.exit}}\n**Explicit consent required** before transitioning to {{workflow.next}}.\n{{/workflow.consent.exit}}\n</code></pre>"},{"location":"user/documents/#loops","title":"Loops","text":"<p>Iterate over lists:</p> <pre><code>{{#project.categories}}\n- {{name}}: {{description}}\n{{/project.categories}}\n</code></pre>"},{"location":"user/documents/#partials","title":"Partials","text":"<p>A partial is a template snippet that you can include in other templates. Partials must be declared in the frontmatter <code>includes</code> list:</p> <pre><code>---\nincludes:\n  - ../_partials/header\n  - ../_partials/footer\n---\n\n{{&gt; header}}\n\nContent here...\n\n{{&gt; footer}}\n</code></pre> <p>Partial naming rules:</p> <ul> <li>Partial filenames must start with an underscore <code>_</code></li> <li>The underscore prefix must NOT be specified in the <code>includes</code> list or the <code>{{&gt; }}</code> directive</li> <li>The example above refers to <code>../_partials/_header.mustache</code> and <code>../_partials/_footer.mustache</code></li> <li>Paths are relative to the origin document</li> <li>Partials must be within the document root (cannot point outside <code>docroot</code>)</li> </ul>"},{"location":"user/documents/#template-examples","title":"Template Examples","text":"<p>Many working template examples are installed in the document root. Explore these to see practical implementations of variables, conditionals, loops, and partials.</p>"},{"location":"user/documents/#template-context","title":"Template Context","text":"<p>Available variables in templates:</p>"},{"location":"user/documents/#project","title":"project.*","text":"<p>Project information:</p> <ul> <li><code>{{project.name}}</code> - Project name</li> <li><code>{{project.key}}</code> - Project key (for disambiguation)</li> <li><code>{{project.hash}}</code> - Project hash (SHA256 of project path)</li> <li><code>{{project.categories}}</code> - List of categories</li> <li><code>{{project.collections}}</code> - List of collections</li> <li><code>{{project.project_flag_values}}</code> - List of project flags (for iteration)</li> <li><code>{{project.allowed_write_paths}}</code> - List of allowed write paths</li> <li><code>{{project.additional_read_paths}}</code> - List of additional read paths</li> <li><code>{{project.openspec_validated}}</code> - Whether OpenSpec validation completed</li> <li><code>{{project.openspec_version}}</code> - OpenSpec CLI version if detected</li> </ul>"},{"location":"user/documents/#feature-flags","title":"Feature Flags","text":"<p>Feature flags:</p> <ul> <li><code>{{feature_flags}}</code> - Feature flags as dictionary (for conditionals)</li> <li><code>{{feature_flag_values}}</code> - Feature flags as list (for iteration)</li> </ul>"},{"location":"user/documents/#other-context","title":"Other Context","text":"<ul> <li><code>{{client_working_dir}}</code> - Client's working directory</li> <li><code>{{projects}}</code> - All projects data</li> <li><code>{{projects_count}}</code> - Number of projects</li> </ul>"},{"location":"user/documents/#session","title":"session.*","text":"<p>Session information:</p> <ul> <li><code>{{session.id}}</code> - Session ID</li> <li><code>{{session.project}}</code> - Current project name</li> </ul>"},{"location":"user/documents/#command","title":"command.*","text":"<p>Command context (in command templates):</p> <ul> <li><code>{{command.name}}</code> - Command name</li> <li><code>{{command.args}}</code> - Command arguments</li> <li><code>{{command.kwargs}}</code> - Command keyword arguments</li> </ul> <p>Note: For workflow-specific template variables, see Workflows. For OpenSpec-specific template variables, see OpenSpec Integration.</p>"},{"location":"user/documents/#special-functions","title":"Special Functions","text":""},{"location":"user/documents/#file-inclusion","title":"File Inclusion","text":"<p>Include file content:</p> <pre><code>{{file \"path/to/file.md\"}}\n</code></pre>"},{"location":"user/documents/#date-formatting","title":"Date Formatting","text":"<p>Format dates:</p> <pre><code>{{date \"YYYY-MM-DD\"}}\n</code></pre>"},{"location":"user/documents/#examples","title":"Examples","text":""},{"location":"user/documents/#conditional-instructions","title":"Conditional Instructions","text":"<pre><code>---\ntype: agent/instruction\ninstruction: Follow project guidelines\n---\n\n# Guidelines\n\n{{#workflow.phase}}\nCurrent phase: {{workflow.phase}}\n\n{{#workflow.consent.exit}}\n\u26a0\ufe0f Explicit consent required before transitioning.\n{{/workflow.consent.exit}}\n{{/workflow.phase}}\n\nGeneral guidelines apply...\n</code></pre>"},{"location":"user/documents/#project-specific-content","title":"Project-Specific Content","text":"<pre><code>---\ntype: agent/information\ndescription: Project architecture for {{project.name}}\n---\n\n# {{project.name}} Architecture\n\nThis project uses...\n</code></pre>"},{"location":"user/documents/#feature-gated-content","title":"Feature-Gated Content","text":"<pre><code>---\ntype: agent/instruction\nrequires-openspec: true\n---\n\n# OpenSpec Workflow\n\nFollow OpenSpec workflow...\n</code></pre>"},{"location":"user/documents/#dynamic-lists","title":"Dynamic Lists","text":"<pre><code>---\ntype: user/information\n---\n\n# Available Categories\n\n{{#project.categories}}\n- **{{name}}**: {{description}}\n{{/project.categories}}\n</code></pre>"},{"location":"user/documents/#next-steps","title":"Next Steps","text":"<ul> <li>Feature Flags - Conditional content with flags</li> <li>Commands - Using command templates</li> <li>Content Management - Content types and organisation</li> </ul>"},{"location":"user/feature-flags/","title":"Feature Flags","text":"<p>Feature flags control how mcp-guide behaves, what features are enabled, and how content is delivered. You can set flags globally (affecting all projects) or per-project (for specific contexts).</p>"},{"location":"user/feature-flags/#viewing-flags","title":"Viewing Flags","text":"<p>Use the <code>@guide :flags</code> prompt command to see what's currently active. It shows feature flags, project flags, and the resolved values (what's actually in effect).</p> <p>See: Commands for more on the <code>:flags</code> command.</p>"},{"location":"user/feature-flags/#how-flags-work","title":"How Flags Work","text":"<p>Flags can be set at two levels:</p> <p>Project flags - Apply to a specific project. Just ask your AI agent:</p> <pre><code>Please set the workflow feature flag to true for this project\n</code></pre> <p>Feature flags - Apply across all projects by default. Ask your AI agent:</p> <pre><code>Please set the content-format feature flag to mime globally\n</code></pre> <p>When resolving what value to use, project flags take precedence over feature flags, which take precedence over defaults.</p>"},{"location":"user/feature-flags/#setting-flags","title":"Setting Flags","text":"<p>Just ask your AI agent using natural language:</p> <pre><code>Set the workflow flag to true\nEnable OpenSpec for this project\nSet content-style to plain globally\nRemove the workflow flag (use default)\n</code></pre>"},{"location":"user/feature-flags/#core-feature-flags","title":"Core Feature Flags","text":"Flag Description Type Default <code>workflow</code> Enables workflow phase tracking (discussion, planning, implementation, check, review). Can be <code>true</code> (all phases), <code>false</code> (disabled), or list of phase names. <code>boolean</code> or <code>list[string]</code> <code>false</code> <code>workflow-file</code> Path to workflow tracking file. Supports variables: <code>{project-name}</code>, <code>{project-key}</code>, <code>{project-hash}</code>. <code>string</code> <code>.guide.yaml</code> <code>workflow-consent</code> Controls phase transition consent requirements. Can be <code>true</code> (default consent rules), <code>false</code> (no consent required), or custom rules specifying which phases require consent to enter or exit. <code>boolean</code> or <code>dict</code> <code>true</code> <code>openspec</code> Enables OpenSpec integration for structured change management. Adds OpenSpec-specific commands and workflow instructions. <code>boolean</code> <code>false</code> <code>content-style</code> Controls markdown formatting in template output. <code>plain</code> = strips all formatting, <code>headings</code> = renders heading markers only, <code>full</code> = renders all markdown. <code>string</code> <code>plain</code> <code>content-format</code> Controls content MIME type. <code>text</code> = plain text, <code>mime</code> = MIME multipart format. <code>string</code> <code>text</code> <code>allow-client-info</code> Enables collection of client environment information (OS, hostname, user, git remotes). Privacy-sensitive. <code>boolean</code> <code>false</code> <code>guide-development</code> Enables development features for mcp-guide itself. <code>boolean</code> <code>false</code> <p>Notes:</p> <ul> <li><code>workflow</code> set to <code>true</code> enables all 5 default phases: discussion, planning, implementation, check, review</li> <li><code>workflow</code> can be a list to enable specific phases: <code>[\"discussion\", \"planning\", \"implementation\"]</code> (<code>discussion</code> and <code>implementation</code> are mandatory)</li> <li><code>workflow-consent</code> set to <code>true</code> applies default consent: implementation requires entry consent, review requires exit consent</li> <li><code>workflow-consent</code> can be a dict for custom consent: <code>{\"planning\": [\"entry\"], \"implementation\": [\"entry\", \"exit\"]}</code></li> </ul>"},{"location":"user/feature-flags/#using-flags-in-templates","title":"Using Flags in Templates","text":""},{"location":"user/feature-flags/#conditional-content","title":"Conditional Content","text":"<p>Use <code>requires-*</code> in frontmatter:</p> <pre><code>---\nrequires-workflow: true\n---\n\n# Workflow Instructions\n\nFollow the {{workflow.phase}} phase guidelines...\n</code></pre> <p>Document is included only if <code>workflow</code> flag is set and not false.</p>"},{"location":"user/feature-flags/#next-steps","title":"Next Steps","text":"<ul> <li>Documents - Using flags in templates</li> <li>Workflows - Workflow flag details</li> <li>Content Management - Conditional content</li> </ul>"},{"location":"user/getting-started/","title":"Getting Started with mcp-guide","text":"<p>So you've got mcp-guide installed and running. Now what?</p> <p>This section answers the most important question: how do I actually use it?</p>"},{"location":"user/getting-started/#guide-mcp-purpose","title":"Guide MCP Purpose","text":"<p>At its core, mcp-guide serves instructions to your AI agent. Think of it as a structured way to tell your agent how to work on your project - providing information on coding standards, workflow steps, project-specific context - all delivered on demand.</p> <p>While it can do more than that, serving agent instructions is the fundamental purpose. Everything else builds on this.</p>"},{"location":"user/getting-started/#the-guide-prompt","title":"The <code>guide</code> Prompt","text":"<p>Your primary interface is the guide prompt (an agent determines the prompt prefix - it may be <code>@guide</code> or <code>/guide</code>). The prompt provides a means of interacting with the MCP, allowing you to query and control it directly.</p> <p>When you invoke the guide prompt with an expression that conains just a category name, you get back all the documents in that category that match the patterns set for that category. The agent receives these documents and acts on them according to their type.</p>"},{"location":"user/getting-started/#basic-usage","title":"Basic Usage","text":"<p>Common Examples:</p> Prompt What It Does <code>@guide commit</code> Provides commit message instructions based on changes in your working tree <code>@guide pr</code> Provides GitHub pull request description instructions for changes compared with your main branch <code>@guide review</code> Instructions for the agent to self-review code changes <code>@guide guidelines</code> Composite request presenting coding standards, language-specific guides, and project context"},{"location":"user/getting-started/#document-categories-and-collections","title":"Document Categories and Collections","text":""},{"location":"user/getting-started/#categories","title":"Categories","text":"<p>A category is a named group of documents with an associated directory (usually the same as the name), an optional description and zero or more patterns. The category name is limited to 30 printable unicode characters and cannot start with an underscore or hyphen and cannot contain whitespace.</p> <p>When you reference a category without specifying a pattern, you retrieve documents matching the patterns.</p> <p>Patterns are \"globs\", and may contain '', '?', '*' and path separators. However, they are usually used to match the basename of documents (filenames without any extension). The document matcher automatically tries several extensions by default, favouring markdown, mustache templates and text files.</p> <p>When referencing a category, you can also override the default patterns:</p> <pre><code>@guide lang/python\n</code></pre> <p>Retrieves the python language documents from the <code>lang</code> category.</p> <pre><code>@guide docs/workflow+tracking\n</code></pre> <p>Retrieves documents matching BOTH <code>workflow</code> AND <code>tracking</code> patterns in the <code>docs</code> category.</p> <p>What you're providing is an expression, which takes the form of a comma-separated list of categories, with optional patterns for each, separated by '+'. When retrieved, all matching documents are returned to the agent.</p>"},{"location":"user/getting-started/#collections","title":"Collections","text":"<p>Collections are groups of category expressions - convenient shortcuts or \"macros\" for commonly used combinations.</p> <p>Instead of typing <code>@guide guide,lang/python,context/project,checks</code> every time, you might have a collection called <code>guidelines</code> that includes all of those.</p> <p>Collections make it easy to provide targeted context for specific tasks without remembering complex expressions.</p> <p>See Categories and Collections for managing these.</p>"},{"location":"user/getting-started/#document-types","title":"Document Types","text":"<p>What the agent does with documents depends on their type, set in the document metadata:</p> <ul> <li><code>agent/instruction</code> - Directives the agent must follow (most common)</li> <li><code>agent/information</code> - Context and reference material for the agent</li> <li><code>user/information</code> - Content displayed to users</li> </ul> <p>When invoking multiple patterns, be aware that mixing document types may not give the desired result. Most documents served via <code>@guide</code> are agent instructions - this is the core of what mcp-guide does.</p>"},{"location":"user/getting-started/#default-profile","title":"Default Profile","text":"<p>When you start mcp-guide in a new project, it creates a default profile with the following categories:</p> <ul> <li>guide - General Guidelines and Instructions</li> <li>docs - General Uncategorised Documents</li> <li>lang - Language-specific guides (initially empty)</li> <li>context - Project context (initially empty)</li> <li>checks - Testing and validation instructions (initially empty)</li> <li>review - Code review instructions</li> </ul> <p>Before these can become useful, you will need to add patterns: - Add your programming language to <code>lang</code> - Add project context (tracking method, workflow approach, issue tracking etc.) - Add testing frameworks and special instructions to <code>checks</code> - Configure review depth and output format in <code>review</code></p> <p>Many provided documents are opinionated about development approach and direction. Use what works for you, ignore the rest.</p> <p>To discover available documents in a category you can simple ask the agent to list all files available in that category.</p>"},{"location":"user/getting-started/#special-instructionsmd","title":"Special: INSTRUCTIONS.md","text":"<p>The <code>checks</code> category includes a brief document <code>instructions</code> that tells the agent to look for <code>INSTRUCTIONS.md</code> in your project root. This file contains edicts the agent MUST obey during development - rules specific to your project or agent that curb common misbehaviors.</p> <p>The <code>checks</code> phase in workflow mode is a good place to remind the agent of these instructions before formal examination of changes. Also consider appending <code>checks/instructions</code> to your default <code>guidelines</code> collection.</p>"},{"location":"user/getting-started/#adding-profiles","title":"Adding Profiles","text":"<p>Other profiles can be added on demand - they are additive to your existing configuration. See Profiles for details.</p>"},{"location":"user/getting-started/#commands","title":"Commands","text":"<p>Commands are specialized documents that tell the agent to do something specific or present useful information using a templated layout. They are special in that use a <code>:</code> prefix in the <code>@guide</code> prompt: <code>@guide :&lt;command&gt;</code>.</p> <p>Many commands accept these common arguments:</p> Argument Description <code>-h</code>, <code>--help</code> Show help <code>-v</code>, <code>--verbose</code> Detailed output <code>-q</code>, <code>--quiet</code> Minimal output <code>-f</code>, <code>--force</code> Skip confirmations <code>-d</code>, <code>--debug</code> Debug information <code>-t</code>, <code>--table</code> Tabular format <p>Not all commands support all arguments - use <code>:help &lt;command&gt;</code> to see what's available for a specific command.</p>"},{"location":"user/getting-started/#useful-commands","title":"Useful Commands","text":"Command Description <code>@guide :project</code> Information about the current project, categories, and collections <code>@guide :status</code> Current project name, active tasks, and workflow state (if enabled) <code>@guide :agent</code> Information about the running agent and its attributes <code>@guide :create/category</code> Create new categories <code>@guide :create/collection</code> Create new collections <code>@guide :help</code> List available commands <code>@guide :help &lt;command&gt;</code> Detailed help for a specific command (without <code>:</code> prefix) <p>Note: The <code>:project</code>, <code>:status</code>, and <code>:agent</code> commands may show incomplete information if the agent hasn't yet requested or determined certain details through tool use. Running them a couple of times or using a general <code>@guide &lt;category&gt;</code> instruction will usually shake this out immediately.</p>"},{"location":"user/getting-started/#first-run-self-installation","title":"First Run - Self Installation","text":"<p>When mcp-guide first runs, it creates:</p> <ul> <li>Configuration directory:</li> <li>macOS/Linux: <code>~/.config/mcp-guide/</code></li> <li> <p>Windows: <code>%APPDATA%\\mcp-guide\\</code></p> </li> <li> <p>Configuration file: <code>config.yaml</code> (shared by all projects)</p> </li> <li> <p>Document root (<code>docroot</code>): <code>docs/</code> directory within the configuration directory</p> </li> <li> <p>Standard templates: Copies of all default documents and templates</p> </li> </ul> <p>If you want to add custom documents, place them in the <code>docs/</code> directory. Each category has a designated subdirectory (usually matching the category name). Files within these directories become available to serve via the MCP.</p> <p>The docroot is on the MCP server's filesystem - if running in Docker or on a remote server, that's where the files live, and are not available on your local machine unless mapped, or \"mounted\".</p>"},{"location":"user/getting-started/#next-steps","title":"Next Steps","text":"<p>Now that you understand the basics:</p> <ul> <li>Explore Categories and Collections to organise your content</li> <li>Check out Profiles for pre-configured setups</li> <li>Learn about Commands for specialised functionality</li> <li>Review Workflows if you want structured development phases</li> <li>See Feature Flags to customise behaviour</li> </ul> <p>The key thing to remember: mcp-guide serves instructions to your AI agent. Everything else is about organising and delivering those instructions effectively.</p>"},{"location":"user/installation/","title":"Installation Guide","text":"<p>Complete installation and setup instructions for mcp-guide with AI agents.</p>"},{"location":"user/installation/#installation-with-ai-agents","title":"Installation with AI Agents","text":"<p>mcp-guide is designed to work with AI agents via the Model Context Protocol (MCP). Configure your AI agent to run mcp-guide as an MCP server.</p>"},{"location":"user/installation/#common-json-configuration","title":"Common JSON configuration","text":"<p>This JSON block can be used with most AI CLI agents to add the MCP server. It requires uv, Python 3.11+ to be installed, and the \"uvx\" command to be available on the PATH.</p> <p>mcp-guide supports three transport modes:</p> <ul> <li>STDIO - Standard input/output for local agent communication (most common)</li> <li>HTTP - Non-secure network transport using Server-Sent Events (SSE)</li> <li>HTTPS - Secure network transport using Server-Sent Events (SSE) with SSL certificates</li> </ul> <p>MCP client configuration (STDIO):</p> <pre><code>{\n  \"mcpServers\": {\n    \"mcp-guide\": {\n      \"command\": \"uvx\",\n      \"args\": [\"mcp-guide\"],\n      \"env\": {\n        \"MCP_TOOL_PREFIX\": \"\"\n      }\n    }\n  }\n}\n</code></pre> <p>Note: The <code>env</code> section is optional but recommended for Claude Code to avoid double-prefixing of tool names.</p> <p>The following configuration requires only docker. The host volume mapping is optional but recommended to persist any changes you make to documents.</p> <p>MCP client configuration (STDIO with Docker):</p> <pre><code>{\n  \"mcpServers\": {\n    \"mcp-guide\": {\n      \"command\": \"docker\",\n      \"args\": [\n        \"run\",\n        \"-i\",\n        \"--rm\",\n        \"-v\",\n        \"${HOME}/.config/mcp-guide:/home/mcp/.config/mcp-guide\",\n        \"dlnugent/mcp-guide:latest\",\n        \"stdio\"\n      ]\n    }\n  }\n}\n</code></pre>"},{"location":"user/installation/#stdio-mode-default","title":"STDIO Mode (Default)","text":"<p>Standard input/output for local agent communication. This is the most common configuration.</p> <p>Configuration locations: - Kiro-CLI: <code>~/.kiro/settings/mcp.json</code> - Claude Code: <code>~/.claude/settings.json</code> - GitHub Copilot CLI: <code>~/.config/.copilot/mcp.json</code></p>"},{"location":"user/installation/#streaming-mode-sse","title":"Streaming Mode (SSE)","text":""},{"location":"user/installation/#http-transport","title":"HTTP transport","text":"<p>MCP client configuration (HTTP):</p> <pre><code>{\n  \"mcpServers\": {\n    \"mcp-guide\": {\n      \"command\": \"uvx\",\n      \"args\": [\n        \"--with\",\n        \"uvicorn\",\n        \"mcp-guide\",\n        \"http://localhost:8080\"\n      ]\n    }\n  }\n}\n</code></pre>"},{"location":"user/installation/#https-transport","title":"HTTPS transport","text":"<p>Network transport with Server-Sent Events for remote access. HTTPS transport requires SSL certificates, HTTP transport does not. Both configurations require uvicorn for serving HTTP requests.</p> <p>MCP client configuration (HTTPS):</p> <pre><code>{\n  \"mcpServers\": {\n    \"mcp-guide\": {\n      \"command\": \"uvx\",\n      \"args\": [\n        \"--with\",\n        \"uvicorn\",\n        \"mcp-guide\",\n        \"https://localhost:8443\",\n        \"--ssl-certfile\",\n        \"/path/to/cert.pem\",\n        \"--ssl-keyfile\",\n        \"/path/to/key.pem\"\n      ]\n    }\n  }\n}\n</code></pre> <p>Note: Port 443 (default HTTPS) requires root/admin privileges. Use port 8443 or another non-privileged port (&gt;1024) for development.</p> <p>Generating SSL certificates (development):</p> <pre><code>openssl req -x509 -newkey rsa:4096 -nodes \\\n  -out cert.pem -keyout key.pem -days 365\n</code></pre> <p>For production, use certificates obtained from a trusted CA (Let's Encrypt, DigiCert, etc.). Alternatively, use a reverse proxy like nginx or Apache to handle SSL termination and forward requests to mcp-guide over HTTP. Note that no confidential information is transferred between mcp and agent - there are no login credentials or other secrets. HTTPS transport is recommended when accessing the server from another host, however.</p>"},{"location":"user/installation/#docker-compose","title":"Docker Compose","text":"<p>mcp-guide provides docker compose support for containerised deployments. Use the <code>--profile</code> flag to select which service to run (e.g., <code>docker compose --profile http up</code>).</p> <p>Docker compose configuration:</p> <pre><code>services:\n  mcp-guide-http:\n    image: dlnugent/mcp-guide:latest\n    profiles: [http]\n    ports:\n      - \"8080:8080\"\n    command: [\"http\", \"--host\", \"0.0.0.0\", \"--port\", \"8080\"]\n    environment:\n      - MG_LOG_LEVEL=${MG_LOG_LEVEL:-info}\n      - MG_LOG_JSON=${MG_LOG_JSON:-1}\n\n  mcp-guide-https:\n    image: dlnugent/mcp-guide:latest\n    profiles: [https]\n    ports:\n      - \"443:443\"\n    volumes:\n      - ./cert.pem:/home/mcp/certs/cert.pem:ro\n      - ./key.pem:/home/mcp/certs/key.pem:ro\n    command: [\"https\", \"--host\", \"0.0.0.0\", \"--port\", \"443\", \"--ssl-certfile\", \"/home/mcp/certs/cert.pem\", \"--ssl-keyfile\", \"/home/mcp/certs/key.pem\"]\n    environment:\n      - MG_LOG_LEVEL=${MG_LOG_LEVEL:-info}\n      - MG_LOG_JSON=${MG_LOG_JSON:-1}\n</code></pre> <p>Note: STDIO mode cannot be used in a compose configuration because it requires the MCP client to start the MCP server to attach stdin/stdout used for message exchange. In HTTP/HTTPS mode, the MCP server runs independently from the AI client and communicates over the network using the HTTP protocol.</p> <p>Pull the pre-built image:</p> <pre><code>docker pull dlnugent/mcp-guide:latest\n</code></pre> <p>Note that the volume mappings (-v) for configuration files are optional, but ensure that configuration changes and any changes to documents in the docroot store are persisted across restarts.</p>"},{"location":"user/installation/#docker-stdio-mode","title":"Docker STDIO Mode","text":"<p>Run with docker:</p> <pre><code>docker run -it --rm \\\n  -v ~/.config/mcp-guide:/home/mcp/.config/mcp-guide \\\n  dlnugent/mcp-guide:latest\n</code></pre>"},{"location":"user/installation/#docker-http-mode","title":"Docker HTTP Mode","text":"<p>Run with docker:</p> <pre><code>docker run -it --rm \\\n  -v ~/.config/mcp-guide:/home/mcp/.config/mcp-guide \\\n  -p 8080:8080 \\\n  dlnugent/mcp-guide:latest \\\n  http://0.0.0.0:8080\n</code></pre> <p>Access at: <code>http://localhost:8080/mcp</code></p>"},{"location":"user/installation/#docker-https-mode","title":"Docker HTTPS Mode","text":"<p>Generate certificates:</p> <pre><code>openssl req -x509 -newkey rsa:4096 -nodes \\\n  -out cert.pem -keyout key.pem -days 365\n</code></pre> <p>Run with HTTPS:</p> <pre><code>docker run -it --rm \\\n  -v ~/.config/mcp-guide:/home/mcp/.config/mcp-guide \\\n  -v $(pwd)/cert.pem:/home/mcp/certs/cert.pem \\\n  -v $(pwd)/key.pem:/home/mcp/certs/key.pem \\\n  -p 443:443 \\\n  dlnugent/mcp-guide:latest \\\n  https://0.0.0.0:443 --ssl-certfile /home/mcp/certs/cert.pem --ssl-keyfile /home/mcp/certs/key.pem\n</code></pre> <p>Access at: <code>https://localhost/mcp</code></p>"},{"location":"user/installation/#other-commands","title":"Other Commands","text":""},{"location":"user/installation/#mcp-install","title":"mcp-install","text":"<p>Install or update the template and document store. Run this after installation or to update to the latest templates.</p> <p>From repository or installed package:</p> <pre><code>mcp-install\n</code></pre> <p>Via uvx:</p> <pre><code>uvx --from mcp-guide mcp-install\n</code></pre> <p>Use <code>--help</code> to display usage information:</p> <pre><code>mcp-install --help\n</code></pre>"},{"location":"user/installation/#guide-agent-install","title":"guide-agent-install","text":"<p>Install mcp-guide configuration for specific AI agents. Automates the setup process by creating the appropriate configuration files.</p> <p>From repository or installed package:</p> <pre><code>guide-agent-install &lt;agent&gt; &lt;dir&gt;\n</code></pre> <p>Via uvx:</p> <pre><code>uvx --from mcp-guide guide-agent-install &lt;agent&gt; &lt;dir&gt;\n</code></pre> <p>Usage: - No arguments: Display README with general information - Agent only: Display agent-specific README - Agent and directory: Install configuration for the specified agent</p> <p>Use <code>--help</code> to display usage information:</p> <pre><code>guide-agent-install --help\n</code></pre>"},{"location":"user/installation/#configuration","title":"Configuration","text":""},{"location":"user/installation/#configuration-directory","title":"Configuration Directory","text":"<p>mcp-guide stores configuration in:</p> <ul> <li>macOS/Linux: <code>~/.config/mcp-guide/</code></li> <li>Windows: <code>%APPDATA%\\mcp-guide\\</code></li> </ul> <p>Directory structure:</p> <pre><code>~/.config/mcp-guide/\n\u251c\u2500\u2500 config.yaml        # Single configuration file\n\u2514\u2500\u2500 docs/             # Content files (docroot)\n</code></pre>"},{"location":"user/installation/#logging","title":"Logging","text":"<p>Environment variables:</p> <pre><code># Log level (TRACE, DEBUG, INFO, WARN, ERROR)\nexport MG_LOG_LEVEL=INFO\n\n# Log file path\nexport MG_LOG_FILE=/var/log/mcp-guide.log\n\n# Enable JSON structured logging (set to 1 or any non-empty value)\nexport MG_LOG_JSON=1\n</code></pre>"},{"location":"user/installation/#tool-naming","title":"Tool Naming","text":"<p>Environment variable:</p> <pre><code># Tool name prefix (default: \"guide\")\nexport MCP_TOOL_PREFIX=\"guide\"\n</code></pre> <p>This can also be configured in the MCP client configuration using the <code>env</code> section (see the stdio configuration example above).</p> <p>Note: Some clients (like Claude Code) already prefix tool names with the MCP server name. In these cases, set <code>MCP_TOOL_PREFIX=\"\"</code> or start with <code>--no-tool-prefix</code> to avoid double prefixing.</p>"},{"location":"user/installation/#next-steps","title":"Next Steps","text":"<ul> <li>Getting Started - Basic concepts and first steps</li> <li>Content Management - Understanding content types</li> <li>Categories and Collections - Organising content</li> </ul>"},{"location":"user/openspec/","title":"OpenSpec Integration","text":"<p>mcp-guide integrates with OpenSpec, an AI-native system for spec-driven development, providing automatic monitoring and command access for managing changes and specifications.</p> <p>For more information on OpenSpec, visit https://openspec.dev</p>"},{"location":"user/openspec/#overview","title":"Overview","text":"<p>OpenSpec integration enables structured change management with automatic monitoring of project changes. The integration validates OpenSpec availability, tracks changes, and provides prompt commands for common operations.</p>"},{"location":"user/openspec/#integration-behaviour","title":"Integration Behaviour","text":""},{"location":"user/openspec/#initial-validation","title":"Initial Validation","text":"<p>When OpenSpec is first enabled, mcp-guide performs one-time validation checks: - Verifies <code>openspec</code> command is installed and available in PATH - Confirms <code>openspec/project.md</code> exists (required by OpenSpec) - Tests that <code>openspec list</code> executes successfully (even if no changes exist)</p>"},{"location":"user/openspec/#session-monitoring","title":"Session Monitoring","text":"<p>During each session, the integration: - Checks OpenSpec version once per session (determines available features) - Refreshes change list hourly or after agent makes OpenSpec changes - Caches responses to minimize redundant command execution</p>"},{"location":"user/openspec/#user-experience","title":"User Experience","text":"<p>The integration may seem verbose in some agents as it executes OpenSpec commands to maintain synchronisation. These commands are necessary for the integration to function correctly. Frequent use of guide tools and prompt commands helps keep OpenSpec and the MCP server synchronised.</p>"},{"location":"user/openspec/#openspec-commands","title":"OpenSpec Commands","text":"<p>When OpenSpec is enabled, additional <code>:openspec/*</code> commands become available. Some commands invoke the OpenSpec CLI directly (with response caching). Use <code>@guide :help</code> for more information (or <code>/guide :help</code> in Claude Code or Copilot CLI).</p> <p>:openspec/init Initialise OpenSpec in the current project using the openspec command. This creates the required directory structure and <code>openspec/project.md</code> file.</p> <p>:openspec/propose (openspec/new, openspec/create) Initiate a new OpenSpec change by creating the change directory structure and proposal document. Emphasises dialogue with the user before writing documents. Optionally creates <code>tasks.md</code> for tracking implementation.</p> <p>:openspec/list List all OpenSpec changes in the project. Triggers a refresh of the change list from OpenSpec CLI.</p> <p>:openspec/list List all OpenSpec changes in the project. Triggers a refresh of the change list from OpenSpec CLI.</p> <p>:openspec/show Show details for the current or a specific OpenSpec change, including proposal, tasks, and spec deltas.</p> <p>@guide :openspec/validate Validate the current or a specific OpenSpec change against schema requirements and structural rules.</p> <p>@guide :openspec/status Get the completion status and percentage for an OpenSpec change based on completed tasks.</p> <p>@guide :openspec/archive Archive a completed OpenSpec change, moving it to the archive directory and optionally updating main specs.</p> <p>@guide :openspec/schemas Discover available OpenSpec schemas in the project for creating new specifications.</p>"},{"location":"user/openspec/#integration-with-the-workflow-feature-flag","title":"Integration with the <code>workflow</code> feature flag","text":"<p>When both OpenSpec and workflow feature flags are enabled, they work together:</p> <ul> <li>The workflow <code>issue</code> field typically specifies the OpenSpec change name (e.g., <code>add-feature-x</code> or <code>add-feature-x/sub-spec</code>)</li> <li>mcp-guide provides its own versions of OpenSpec prompts:</li> <li><code>@guide :workflow/implement</code> - Equivalent to openspec-apply (with full project guidelines)</li> <li><code>@guide :openspec/archive</code> - Equivalent to openspec-archive</li> <li><code>@guide :openspec/propose</code> - Equivalent to openspec-propose</li> </ul> <p>Otherwise, OpenSpec and workflow operate independently.</p>"},{"location":"user/openspec/#openspec-template-context","title":"OpenSpec Template Context","text":"<p>When OpenSpec is enabled, OpenSpec information is available in content templates via <code>{{openspec.*}}</code> variables:</p> <ul> <li><code>{{openspec.available}}</code> - Boolean indicating if OpenSpec is available</li> <li><code>{{openspec.version}}</code> - OpenSpec version string</li> <li><code>{{openspec.changes}}</code> - Array of change objects with name, status, and task counts</li> <li><code>{{openspec.show}}</code> - Details of currently shown change</li> <li><code>{{openspec.status}}</code> - Status information for current change</li> </ul>"},{"location":"user/openspec/#configuration","title":"Configuration","text":""},{"location":"user/openspec/#the-openspec-feature-flag","title":"The <code>openspec</code> Feature Flag","text":"<p>This feature flag, normally set at project level, enables OpenSpec integration:</p> <p>Boolean: - <code>false</code> / absent: OpenSpec integration disabled (default) - <code>true</code>: Enable OpenSpec integration with automatic monitoring</p> <p>When enabled, the OpenSpecTask runs periodically to monitor changes and maintain synchronisation with the OpenSpec CLI.</p>"},{"location":"user/profiles/","title":"Profiles","text":"<p>Profiles give you quick project setup with pre-configured categories and collections.</p>"},{"location":"user/profiles/#what-are-profiles","title":"What are Profiles?","text":"<p>Think of profiles as templates for your project. Instead of manually creating categories and collections, you can apply a profile that sets everything up for you. There are profiles for common scenarios like Python development, TDD workflows, Jira integration, and various programming languages and frameworks.</p>"},{"location":"user/profiles/#discovering-profiles","title":"Discovering Profiles","text":"<p>Ask your AI agent what's available:</p> <pre><code>list all project profiles\nWhat profiles are available?\n</code></pre> <p>The agent will show you available profiles and what they add to your project.</p>"},{"location":"user/profiles/#using-profiles","title":"Using Profiles","text":"<p>Just ask your AI agent to apply them:</p> <pre><code>Apply the python profile\nUse the tdd profile for this project\nAdd the jira profile\n</code></pre>"},{"location":"user/profiles/#how-profiles-work","title":"How Profiles Work","text":"<p>Profiles are additive - they add categories and collections without removing existing ones. You can apply multiple profiles to build up your project configuration:</p> <pre><code>Apply the python profile\nApply the tdd profile\nApply the jira profile\n</code></pre> <p>This gives you Python + TDD + Jira setup combined.</p> <p>Applying the same profile multiple times has no effect - profiles are idempotent.</p>"},{"location":"user/workflows/","title":"Workflow Support","text":"<p>mcp-guide provides MCP-assisted workflow support for development, giving users complete control over how AI agents participate in the development process.</p>"},{"location":"user/workflows/#overview","title":"Overview","text":"<p>Workflow support enables structured development phases with configurable agent behaviour. Users can choose from no workflow assistance (default), minimal assistance, or full multi-phase workflows with consent controls.</p>"},{"location":"user/workflows/#workflow-phases","title":"Workflow Phases","text":"Phase Purpose discussion Initial problem analysis and requirements gathering planning Implementation plan creation and review implementation Code changes and feature development check Testing and validation review Final review before completion"},{"location":"user/workflows/#state-file","title":"State File","text":"<p>Workflow state is tracked in <code>.guide.yaml</code> (configurable via <code>workflow-file</code> flag):</p> <pre><code>phase: planning\nissue: add-feature-x\nplan: .todo/feature-x-plan.md\ntracking: JIRA-123\ndescription: Optional context\nqueue:\n  - next-issue\n  - another-issue\n</code></pre> <p>Fields: - <code>phase</code>: Current workflow phase (required) - <code>issue</code>: Current issue ID or path (optional) - <code>plan</code>: Path to implementation plan (optional) - <code>tracking</code>: External tracker reference (optional) - <code>description</code>: Phase context or sub-phase info (optional) - <code>queue</code>: Queued issues in priority order (optional)</p>"},{"location":"user/workflows/#configuration","title":"Configuration","text":""},{"location":"user/workflows/#the-workflow-feature-flag","title":"The <code>workflow</code> Feature Flag","text":"<p>This feature flag, normally set at the project level, controls which phases are enabled. It may be:</p> <p>Boolean: - <code>false</code> / absent: No MCP-assisted workflow (default) - <code>true</code>: Enables all 5 phases</p> <p>List: - Custom phase selection (if enabled, <code>discussion</code> and <code>implementation</code> are mandatory) - Example: <code>[discussion, implementation]</code> - Minimal workflow - Example: <code>[discussion, implementation, review]</code> - Common workflow</p>"},{"location":"user/workflows/#the-workflow-consent-feature-flag","title":"The <code>workflow-consent</code> Feature Flag","text":"<p><code>workflow-consent</code> controls automatic phase transitions. It is also a multi-type flag:</p> <p>Boolean: - <code>false</code> / absent: Agent transitions automatically between phases - <code>true</code>: Default consent stops at critical transitions   - Requires consent before entering implementation (prevents enthusiastic agents from making changes)   - Requires consent before exiting review (prevents automatic mode change before review is finalised)</p> <p>Dict: - Custom per-phase consent configuration - Keys: Phase names - Values: List of <code>'entry'</code> and/or <code>'exit'</code></p> <p>Consent types: - <code>entry</code>: Require explicit consent to enter the phase - <code>exit</code>: Require explicit consent to exit the phase</p> <p>If <code>workflow-consent</code> is configured with at least one phase, the default configuration for every phase is not to require consent on either entry or exit unless overridden.</p>"},{"location":"user/workflows/#workflow-commands","title":"Workflow Commands","text":"<p>Tracking workflow status is an important aspect of how the MCP operates. When transitioning between phases it will send certain instructions to the agent in order to keep it appraised of what actions are allowed or prevented. Unfortunately, agents are non-deterministic and will sometimes \"forget\" to send updates to the MCP. The MCP server, however, will periodically send reminders on the back of other responses, and unless the agent is being particularly stubborn, it should eventually comply.</p> <p>Frequent use of workflow commands will increase the opportunity of the mcp sending these instructions. When workflow is enabled, additional workflow prompt commands become available, many of which have shortcuts or aliases. Use <code>@guide :help</code> for more information.</p> <p>@guide :workflow/show (:show) Displays the current workflow status and other details. This should directly correspond with the content of the workflow file (<code>.guide.yaml</code>) unless the mcp is not being updated by the agent.</p> <p>@guide :workflow/issue (:issue) Manage or change the current workflow issue, description, tracking and transition to next</p> <p>@guide :workflow/discuss (:discuss) Requests return to discussion mode, optionally switch to a different issue if specified</p> <p>@guide :workflow/reset (:reset) Marks the current issue as complete and resets to discussion (shortcut). Certain conditions must be met:   - there are no staged/uncommitted changes   - the current branch must be <code>main</code></p> <p>@guide :workflow/phase (:phase) Requests transition to a specific provided workflow phase</p> <p>:workflow/check (:check) Run all code checks for changes according to test and code quality checks for the project.</p> <p>:workflow/review (:review) Delegate a review to a guide-review agent. If delegates are not supported by the agent, then <code>@guide code-review</code> will do the same thing in the foreground.</p> <p>:workflow/implement (:implement) Explicitly requests commencement of the implementation phase.</p> <p>:workflow/plan (:plan) Explicitly requests creating an implementation plan for the current change.</p>"},{"location":"user/workflows/#workflow-template-context","title":"Workflow Template Context","text":"<p>If workflow is enabled, the current workflow state is available in content templates via <code>{{workflow.*}}</code> variables. Note that this relies on the agent updating the mcp of the current state via the internal <code>send_file_content</code> tool.</p> <ul> <li><code>{{workflow.phase}}</code> - Current phase name</li> <li><code>{{workflow.issue}}</code> - Current issue ID or path</li> <li><code>{{workflow.plan}}</code> - Implementation plan path</li> <li><code>{{workflow.tracking}}</code> - External tracker reference</li> <li><code>{{workflow.description}}</code> - Phase context</li> <li><code>{{workflow.queue}}</code> - Queued issues list</li> </ul>"}]}