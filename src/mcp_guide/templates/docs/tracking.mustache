---
type: agent/information
requires-workflow: true
description: Workflow phase tracking policy
instruction: Follow this policy exactly. If {{workflow.file}} missing, create it and enter {{workflow.phases.0.value}}.
---
# Workflow Phases and Tracking

## File Format
Development phases are tracked in {{workflow.file}}
```yaml
phase: [{{#workflow.phases}}{{value}}{{^last}}|{{/last}}{{/workflow.phases}}]
issue: <current-issue>
tracking: <tracker> <tracker-id>
description: <optional-context>
queue:
  - <queued-issues>
```

## Core Rules
- Missing `.guide.yaml` = assume `phase: {{workflow.phases.0.value}}`
- Missing issue = request from user
- Phase changes MUST update file
- Issue format: openspec ID or relative path

## MCP Communication Protocol
**CRITICAL**: After ANY change to `{{workflow.file}}`:
1. Update the file with the new content
2. **IMMEDIATELY** call `send_file_content` with the complete updated content
3. The MCP cannot detect file changes automatically - you MUST notify it on every change
4. On phase transitions the MCP will respond with phase-specific instructions and restrictions
5. Never assume the MCP knows about file changes unless you explicitly send them

## Phase Transitions

{{#workflow.discussion}}
### Discussion Phase
- Default when no `{{workflow.file}}` exists - discussion mode
- Can modify: `{{workflow.file}}`, `openspec/`, `.todo/`
- Cannot modify: production code, tests
{{#workflow.consent.discussion.exit}}
- **EXPLICIT CONSENT OR REQUEST REQUIRED** before transition from discussion phase.
{{/workflow.consent.discussion.exit}}
{{/workflow.discussion}}

{{#workflow.planning}}
### Planning Phase
{{#workflow.consent.planning.entry}}
- **EXPLICIT CONSENT OR REQUEST REQUIRED** before entering planning phase.
{{/workflow.consent.planning.entry}}
- Auto-transition when plan drafted
- Can modify: `{{workflow.file}}`, `openspec/`, `.todo/`
- Cannot modify: production code, tests
{{#workflow.consent.planning.exit}}
- **EXPLICIT CONSENT OR REQUEST REQUIRED** before transition from planning phase.
{{/workflow.consent.planning.exit}}
{{/workflow.planning}}

{{#workflow.implementation}}
### Implementation Phase
{{#workflow.consent.implementation.entry}}
- **EXPLICIT CONSENT OR REQUEST REQUIRED** before entering implementation phase.
{{/workflow.consent.implementation.entry}}
- Can modify: all files including production code, tests
{{#workflow.consent.implementation.exit}}
- **EXPLICIT CONSENT OR REQUEST REQUIRED** before transition from implementation phase.
{{/workflow.consent.implementation.exit}}
{{/workflow.implementation}}

{{#workflow.check}}
### Check Phase
{{#workflow.consent.check.entry}}
- **EXPLICIT CONSENT OR REQUEST REQUIRED** before entering check phase.
{{/workflow.consent.check.entry}}
{{^workflow.consent.check.entry}}
- Auto-transition when implementation complete
{{/workflow.consent.check.entry}}
- Run all tests and code quality checks across ALL files
- Can modify: all files
{{#workflow.consent.check.exit}}
- **EXPLICIT CONSENT OR REQUEST REQUIRED** before transition from check phase.
{{/workflow.consent.check.exit}}
{{/workflow.check}}

{{#workflow.review}}
### Review Phase
{{#workflow.consent.review.entry}}
- **EXPLICIT CONSENT OR REQUEST REQUIRED** before entering review phase.
{{/workflow.consent.review.entry}}
{{^workflow.consent.review.entry}}
- Auto-transition when all tests and code quality checks pass.
{{/workflow.consent.review.entry}}
- Feedback and final review stage
{{#workflow.consent.review.exit}}
- **EXPLICIT CONSENT OR REQUEST REQUIRED** before transition from review phase.
{{/workflow.consent.review.exit}}
{{/workflow.review}}

## Queue Management
- On transition to discussion phase confirm that the current issue can be marked completed.
  - YES: remove issue, and fetch top issue from queue (if one exists)
  - NO: retain issue
- Urgent issue â†’ current issue moves to top of queue
- Queue is usually processed in priority order
