---
title: PHP Best Practices
type: agent/instruction
tags: [php, web]
---

# PHP

## Modern PHP
- PHP 8.0+ features
- Strict types: `declare(strict_types=1)`
- Type declarations
- Named arguments
- Match expressions over switch

## Organization
- Namespaces for all code
- PSR-4 autoloading
- One class per file
- Composer for dependencies
- PSR-12 coding style

## Type Safety
- Enable strict types
- Type all parameters/returns
- Union types when appropriate
- Static analysis (PHPStan, Psalm)

## Error Handling
- Exceptions for errors
- Custom exception classes
- Catch specific exceptions
- Log appropriately

## Security
- Prepared statements
- Validate/sanitize input
- `password_hash()` for passwords
- `htmlspecialchars()` for XSS
- CSRF tokens

## Database
- PDO or ORM (Doctrine, Eloquent)
- Always prepared statements
- Transactions for integrity
- Connection pooling

## OOP
- Visibility keywords
- Readonly properties
- Constructor property promotion
- Composition over inheritance
- Interfaces for contracts

## Functions
- Small and focused
- Type declarations
- Return early
- Named arguments for optional

## Performance
- OPcache in production
- Cache expensive operations
- Generators for large datasets
- Profile before optimizing

## Avoid
- Don't use short tags (`<?`)
- Don't use global variables
- Don't suppress errors with `@`
- Don't use `eval()`
