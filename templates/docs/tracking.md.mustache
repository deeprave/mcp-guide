---
type: agent/instruction
description: Workflow phase tracking policy
instruction: Follow this policy exactly. Create .guide.yaml if missing. Do not display to user.
requires-workflow: true
---
# Workflow Phase Tracking

## File Format
Track phases in `.guide.yaml` (see `WorkflowState` schema):
```yaml
phase: [discussion|planning|implementation|check|review]
issue: <current-issue>
tracking: <tracker> <tracker-id>
description: <optional-context>
queue:
  - <queued-issues>
```

## Core Rules
- Missing `.guide.yaml` = assume `phase: discussion`
- Missing issue = request from user
- Phase changes MUST update file
- Issue format: openspec ID or relative path

## Phase Transitions

### Discussion Phase
- Default when no `.guide.yaml` exists
- Can modify: `.guide.yaml`, `openspec/`, `todo/`
- Cannot modify: production code, tests

### Planning Phase
- Auto-transition when plan drafted
- Can modify: `.guide.yaml`, `openspec/`, `todo/`
- Cannot modify: production code, tests

### Implementation Phase
- **EXPLICIT CONSENT REQUIRED**
- Can modify: all files including production code, tests

### Check Phase
- Auto-transition when implementation complete
- Run all tests and quality checks
- Can modify: all files

### Review Phase
- Auto-transition when all tests pass
- **EXPLICIT CONSENT REQUIRED** to exit
- Feedback and final review stage

## Queue Management
- Complete issue → move to queue
- Urgent issue → current issue moves to queue top
- Process queue in priority order
